async function sendInstagramRequest(e="Hello People"){const t={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:137.0) Gecko/20100101 Firefox/137.0",Accept:"*/*","Accept-Language":"en-US,en;q=0.5","Content-Type":"application/x-www-form-urlencoded","X-FB-Friendly-Name":"usePolarisCreateInboxTrayItemSubmitMutation","X-BLOKS-VERSION-ID":"0d99de0d13662a50e0958bcb112dd651f70dea02e1859073ab25f8f2a477de96","X-CSRFToken":await getCookie("csrftoken"),"X-IG-App-ID":"936619743392459","X-Root-Field-Name":"xdt_create_inbox_tray_item","X-FB-LSD":await getInputValueByName("lsd"),"X-ASBD-ID":"359341","Alt-Used":"www.instagram.com","Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"cors","Sec-Fetch-Site":"same-origin",Priority:"u=0"},o={input:{client_mutation_id:"1",actor_id:await getCookie("ds_user_id"),additional_params:{note_create_params:{note_style:0,text:e}},audience:0,inbox_tray_item_type:"note"}},n=JSON.stringify(o),a=`av=17841462902847215&__d=www&__user=0&__a=1&__req=1k&__hs=20186.HYP%3Ainstagram_web_pkg.2.1...1&dpr=1&__ccg=GOOD&__rev=1021670656&__s=cnlv50%3Ao95nal%3A8sqau1&__hsi=7490933369849171773&__dyn=7xeUjG1mxu1syaxG4Vp41twpUnwgU7SbzEdF8aUco2qwJyEiw9-0DwUx60p-0LVE4W0qa321Rw8G11wBz81s8hwGxu786a3a1YwBgao6C0Mo2iyo7u3ifK0zEkxe2GewGw9a3614xm0zK5o4q3y261kx-0ma2-azqwt8d-2u2J08O321LwTwKG1pg2fwxyo6O1FwlA3a3zhA6bwIDyXxui2qiUqwm8jxK2K0P8K9x6&__csr=${await getCookie("csrftoken")}&__comet_req=7&fb_dtsg=${await getInputValueByName("fb_dtsg")}&jazoest=26194&lsd=${await getInputValueByName("lsd")}&__spin_r=1021670656&__spin_b=trunk&__spin_t=1744118838&__crn=comet.igweb.PolarisDirectInboxRoute&fb_api_caller_class=RelayModern&fb_api_req_friendly_name=usePolarisCreateInboxTrayItemSubmitMutation&variables=${encodeURIComponent(n)}&server_timestamps=true&doc_id=9986151014729199`;try{const e=await fetch("https://www.instagram.com/graphql/query",{credentials:"include",headers:t,referrer:"https://www.instagram.com/direct/inbox/",body:a,method:"POST",mode:"cors"});if(e.ok){console.log("Request successful!"),console.log("Status Code:",e.status);const t=await e.json();console.log("Response:",t)}else{console.error("Request failed!"),console.error("Status Code:",e.status);const t=await e.text();console.error("Response:",t)}}catch(e){console.error("An error occurred:",e)}}async function getCookie(e){return new Promise((t=>{const o=`; ${document.cookie}`.split(`; ${e}=`);if(2===o.length)return t(o.pop().split(";").shift());t(null)}))}async function getInputValueByName(e){return new Promise((t=>{const o=document.querySelector(`input[name="${e}"]`);t(o?o.value:null)}))}async function startSending(){for(console.log("Starting message sending loop. Type 'exit' to quit.");;){const e=prompt("Enter the text you want to send (or type 'exit' to quit):");if(null===e||"exit"===e.toLowerCase()){console.log("Exiting...");break}""!==e.trim()?(await sendInstagramRequest(e),console.log("-".repeat(20))):console.log("Empty message, not sending. Please enter a valid text or exit")}console.log("Message sending loop finished.")}console.log("Paste this code into your browser's developer console while on Instagram (e.g., on the direct inbox page)."),startSending();
